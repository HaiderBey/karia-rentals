<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Karia - Location de Voitures en Tunisie</title>
    <link rel="icon" href="https://img.icons8.com/dusk/64/car-rental.png" type="image/x-icon" sizes = "32x32">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <script type = "module" src="js/main.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>KARIA</h1>
                </div>
                <nav>
                    <ul class="nav-menu">
                        <li><a href="#" class="active">Accueil</a></li>
                        <li><a href="/frontend/voitures.html">Voitures</a></li>
                    </ul>
                </nav>
                <div id = "auth-section">
                    <!-- When not logged in -->
                    <div class="auth-buttons" id="guest-view">
                        <button class="btn btn-login" onclick="window.location.href='signin.html'">Connexion / Inscription</button>
                    </div>
                    <!-- When logged in -->
                    <div id="authenticated-view" style="display: none;">
                        <div id="profile-dropdown">
                            <img id="profile-icon" src="images/assets/profile.svg" alt="Profile">
                            <div id="dropdown-menu">
                                <button onclick="window.location.href='profile.html'">Profile</button>
                                <button id="disconnect-button">Disconnect</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Découvrez le monde sur roues avec notre service de location de voitures</h1>
                <p>Profitez du meilleur service de location de voitures en Tunisie</p>
            </div>
        </div>
        <div class="hero-image">
            <img src="/frontend/images/home-cover.png" alt="Voiture de luxe">
        </div>
    </section>

    <section class="search-form">
      <div class="search-field">
        <label>Pick-up Location</label>
        <div class="input-group">
          <img src="/frontend/images/assets/location.png" alt="Location">
          <input type="text" placeholder="Search a location">
        </div>
      </div>
      
      <div class="search-field">
        <label>Pick-up date</label>
        <div class="input-group">
          <input type="text" value="12/12/2023">
          <img src="/frontend/images/assets/calendar.png" alt="Calendar">
        </div>
      </div>

      <div class="search-field">
        <label>Drop-off Location</label>
        <div class="input-group">
          <img src="/frontend/images/assets/location.png" alt="Location">
          <input type="text" placeholder="Search a location">
        </div>
      </div>

      <div class="search-field">
        <label>Drop-off date</label>
        <div class="input-group">
          <input type="text" value="12/12/2023">
          <img src="/frontend/images/assets/calendar.png" alt="Calendar">
        </div>
      </div>

      <button class="search-btn">
        Find a Vehicle
        <img src="/frontend/images/assets/arrow-right.png" alt="Search">
      </button>
    </section>

    <section class="brands" id="brands">
        <div class="container">
            <div class="section-header">
                <h2>Louer par marques</h2>
                <a href="#" class="view-all">
                    Voir tout 
                    <img src="/frontend/images/assets/arrow-right-black.png" alt="Search">
                </a>
            </div>
            <div class="brands-grid" id = "brandsGrid">
                <!-- Dynamically added brands -->
            </div>
        </div>
            
        <div class="container">
            <div class="section-header">
                <h2>Louer par type de carrosserie</h2>
                <a href="#" class="view-all">
                    Voir tout                     
                    <img src="/frontend/images/assets/arrow-right-black.png" alt="Search">
                </a>
            </div>
            <div class="car-types-grid" id = "typesGrid">
                <!-- Dynamically added types -->
            </div>
        </div>
    </section>

     <!-- Car Collection Section -->
     <section class="car-collection" id="cars">
        <div class="container">
            <div class="section-header center">
                <h2>Notre Impressionnante Collection de Voitures</h2>
                <p>Allant des élégantes berlines aux puissantes voitures de sport, toutes soigneusement sélectionnées pour offrir à nos clients une expérience de conduite ultime.</p>
            </div>
            <div class="car-filters">
                <button class="filter-btn active" data-filter="all">Toutes les Voitures</button>
                <button class="filter-btn" data-filter="popular">Voiture Populaire</button>
                <button class="filter-btn" data-filter="luxury">Voiture de Luxe</button>
                <button class="filter-btn" data-filter="family">Voiture Familiale</button>
                <button class="filter-btn" data-filter="off-road">Voiture Tout-Terrain</button>
            </div>
            <div class="cars-grid" id="carsGrid">
                <!-- Cars will be dynamically loaded here -->
            </div>
            <div class="center-btn">
                <button class="btn btn-secondary" id="loadMoreCars">
                <a href = "/frontend/voitures.html" class="view-all">
                    Voir toutes les voitures
                    <img src="/frontend/images/assets/arrow-right-black.png" alt="Search">
                </a>
                </button>
            </div>
        </div>
    </section>

    <section class="how-it-works" id="how-it-works">
        <div class="container">
            <div class="section-header center">
                <h2>Comment ça marche</h2>
                <p>Louer une voiture de luxe n’a jamais été aussi facile. Notre processus simplifié vous permet de réserver et de confirmer votre véhicule de choix en ligne</p>
            </div>
            <div class="steps-container">
                <div class="step">
                    <div class="step-content">
                        <h3>Parcourir et sélectionner</h3>
                        <p>Choisissez parmi notre large gamme de voitures premium, sélectionnez les dates et lieux de prise en charge et de retour qui vous conviennent le mieux.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-content">
                        <h3>Réserver et confirmer</h3>
                        <p>Réservez votre voiture désirée en quelques clics et recevez une confirmation instantanée par e-mail ou SMS.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-content">
                        <h3>Profitez de votre trajet</h3>
                        <p>Récupérez votre voiture à l’endroit désigné et profitez de votre expérience de conduite premium avec notre service de haute qualité.</p>
                    </div>
                </div>
                
                <div class="step-image">
                    <img src="images/cars/jeep-wrangler.png" alt="Jeep Wrangler">
                </div>
            </div>
        </div>
    </section>

    <section class="services" id="services">
        <div class="container">
            <div class="section-header center">
                <h2>Nos Services & Avantages</h2>
                <p style = "color: white;"> Pour rendre la location facile et sans tracas, nous proposons une variété de services et d'avantages. Nous vous couvrons avec une variété de véhicules et des conditions de location flexibles.</p>
            </div>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">
                        <img src="/frontend/images/assets/sparkle.png">
                    </div>
                    <h3>Choix de Qualité</h3>
                    <p>Nous offrons une large gamme de véhicules de haute qualité parmi lesquels choisir, y compris des voitures de luxe, des SUV, des fourgonnettes et plus encore.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <img src="/frontend/images/assets/jw.png">
                    </div>
                    <h3>Prix Abordables</h3>
                    <p>Nos tarifs de location sont très compétitifs et abordables, permettant à nos clients de profiter de leurs voyages sans se ruiner.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <img src="/frontend/images/assets/black-check-white-circle.png">
                    </div>
                    <h3>Réservation en Ligne Pratique</h3>
                    <p>Avec notre système de réservation en ligne facile à utiliser, les clients peuvent rapidement et facilement réserver leur voiture de location de n'importe où, à tout moment.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h2>KARIA</h2>
                </div>
                <div class="social-links">
                    <a href="#"><img src="/frontend/images/assets/facebook.png" alt="facebook"></a>
                    <a href="#"><img src="/frontend/images/assets/instagram.png" alt="instagram"></a>
                    <a href="#"><img src="/frontend/images/assets/youtube.png" alt="youtube"></a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Karia Location de Voitures. Tous droits réservés.</p>
            </div>
        </div>
    </footer>
    
    <script type = "module">
        import {brandsData, typesData} from '/frontend/js/data.js';
        import { auth } from './js/auth.js';

        const guestView = document.getElementById('guest-view')
        const authView = document.getElementById('authenticated-view')
        // const disconnectBtn = document.getElementById('disconnect-button')

        let currentBrands = []
        let displayedBrands = 12

        let currentTypes = []
        let displayedTypes = 12

        loadBrands()
        loadTypes()
        

        document.addEventListener("DOMContentLoaded", () => {
            
            //View Switching (Authenticated/ Guest)
            switchView()

            // Brand cards functionality
            const brandCards = document.querySelectorAll(".brand-card")
            brandCards.forEach((card) => {
                card.addEventListener("click", function () {
                    const brand = this.getAttribute("data-brand")

                    filterCarsByBrand(brand)

                    // Scroll to cars section
                    document.getElementById("cars").scrollIntoView({ behavior: "smooth" })
                    })
                })
            
            // Car type cards functionality
            const carTypeCards = document.querySelectorAll(".car-type-card")
            carTypeCards.forEach((card) => {
                card.addEventListener("click", function () {
                    const type = this.getAttribute("data-type")

                    filterCarsByType(type)

                    // Scroll to cars section
                    document.getElementById("cars").scrollIntoView({ behavior: "smooth" })
                    })
            })
        })
        
        function switchView(){
            if(auth.isAuthenticated){
                showAuthenticatedView();
            } else {
                showGuestView();
            }
        }

        function showAuthenticatedView(){
            guestView.style.display = 'none';
            authView.style.display = 'block';
        }

        function showGuestView(){
            guestView.style.display = 'block';
            authView.style.display = 'none';
        }
    
        function loadBrands(){
            const brandsGrid = document.getElementById("brandsGrid")
            currentBrands = [...brandsData]

            brandsGrid.innerHTML = ""

            const brandsToDisplay = currentBrands.slice(0, displayedBrands)

            brandsToDisplay.forEach((brand) => {
                const brandCard = createBrandCard(brand)
                brandsGrid.appendChild(brandCard)
            })
        }
        
        function loadTypes(){
            const brandsGrid = document.getElementById("typesGrid")
            currentTypes = [...typesData]

            typesGrid.innerHTML = ""

            const typesToDisplay = currentTypes.slice(0, displayedTypes)

            typesToDisplay.forEach((type) => {
                const typeCard = createTypeCard(type)
                typesGrid.appendChild(typeCard)
            })
        }

        function createBrandCard(brand){
            const brandCard = document.createElement("div")
            brandCard.className = "brand-card"
            brandCard.dataset.brand = brand.brand

            brandCard.innerHTML = `
                <img src="${brand.image}" alt="${brand.brand}">
                <p>${brand.brand}</p>
            `

            return brandCard
        }

        function createTypeCard(type){
            const typeCard = document.createElement("div")
            typeCard.className = "car-type-card"
            typeCard.dataset.brand = type.type

            typeCard.innerHTML = `
                <img src="${type.icon}" alt="${type.type}">
                <p>${type.type}</p>
            `

            return typeCard
        }  

    </script>
</body>
</html>
